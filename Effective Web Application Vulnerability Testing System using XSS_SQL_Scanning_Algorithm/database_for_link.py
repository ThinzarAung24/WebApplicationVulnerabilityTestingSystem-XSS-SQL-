# This py code is used when adding deleting in database (nearly the same insert_value_to_database.py)
import mysql.connector
from mysql.connector import Error
from mysql.connector import errorcode
from file_read_write_delete_fun import *

my_db = mysql.connector.connect(host="localhost", user="aung", password="1234", database="test_accuracy")

my_cursor = my_db.cursor()
#
sql = "INSERT INTO test_links(Link_No, All_Links, Our_Results, Acunetix_Results) VALUES(%s, %s, %s, %s)"

link = read_file_contents("falseNegative.txt")
ll = []
for l in link:
    ll.append(l.rstrip("\n"))
##############################################################################################
# XSS Vulnerability
# r=74
# for i in ll:
#     my_cursor.execute(sql,(r,i,"Possible Cross site scripting","Cross site scripting"))
#     my_db.commit()
#     r = r +1
#     print(my_cursor.rowcount, "record inserted")

##################################################################################################
# SQL Vulnerability
# r=1
# for i in ll:
#     my_cursor.execute(sql,(r,i,"Possible SQL injection","SQL injection"))
#     my_db.commit()
#     r = r +1
#     print(my_cursor.rowcount, "record inserted")
# #######################################################################################################
# Not Found Any Vulnerabiltiies
# r=154
# for i in ll:
#     my_cursor.execute(sql,(r,i,"Not Found any Vulnerability","No SQL and XSS"))
#     my_db.commit()
#     r = r +1
#     print(my_cursor.rowcount, "record inserted")

########################################################################################################
# False Positive
r=201
for i in ll:
    my_cursor.execute(sql,(r,i,"Possible SQL injection","No SQL and XSS"))
    my_db.commit()
    r = r +1
    print(my_cursor.rowcount, "record inserted")
####################################################################################################
# Delete Function
# mycursor = my_db.cursor()
#
# sql = "DELETE FROM test_links WHERE Link_No = 201"
#
# mycursor.execute(sql)
#
# my_db.commit()
#
# print(mycursor.rowcount, "record(s) deleted")
#########################################################################################################
# r=122
# for i in ll:
#     my_cursor.execute(sql,(r,i,"Not Found","SQL injection"))
#     my_db.commit()
#     r = r +1
#     print(my_cursor.rowcount, "record inserted")
